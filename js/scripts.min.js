const fixednav=document.querySelector('.fixednav');let lastScrollTop=0;const handleScroll=()=>{let scrollTop=window.scrollY||document.documentElement.scrollTop;if(Math.abs(scrollTop-lastScrollTop)>=50){if(scrollTop>lastScrollTop){fixednav.classList.add('scroll_hidden');fixednav.classList.add('scrolledbefore');}else{fixednav.classList.remove('scroll_hidden');}lastScrollTop=scrollTop;}};window.addEventListener('scroll',handleScroll);const isGerman=()=>{return window.location.href.includes('/de/')};document.addEventListener('DOMContentLoaded',()=>{const ccb=document.querySelector('[class*="ccb"]');if(!ccb)return;function convertToNumberField(input){if(input.getAttribute('type')==='number')return;input.setAttribute('type','number');}function convertQuantityFields(){const quantityFields=document.querySelectorAll('input[name="quantityField"]');quantityFields.forEach(field=>{convertToNumberField(field);});}function createMailtoLinkFor(link){if(!document.querySelector('.calc-subtotal-list-accordion')){const germanMessage='Es ist etwas schiefgelaufen, bitte kopieren Sie die Preiskalkulation und senden Sie uns eine E-Mail an online@printy.de';const englishMessage='Something went wrong, please manually copy the price calculation and send us an email to online@printy.de';const message=isGerman()?germanMessage:englishMessage;alert(message);return;}let calcSubtotalContent='';const header=document.querySelector('.ccb-calc-heading').innerHTML.replace(/<[^>]*>/g,'');calcSubtotalContent+=`${header}%0A`;const items=document.querySelectorAll('.calc-subtotal-list-accordion .sub-list-item');items.forEach(item=>{const itemContent=item.innerHTML.replace(/<[^>]*>/g,'');calcSubtotalContent+=`${itemContent}%0A`;});const price=document.querySelector('.calc-subtotal-list.totals').innerHTML.replace(/<[^>]*>/g,'');calcSubtotalContent+=`${price}%0A`;link.href=`mailto:online@printy.de?subject=Anfrage%20printy.de%20Preisrechner&body=${calcSubtotalContent}`;}function createOrderButton(){const orderButton=document.createElement('a');orderButton.textContent=isGerman()?'Anfragen':'Request order';orderButton.classList.add('wp-block-button__link','has-accent-1-background-color','has-text-color','has-background','has-link-color','wp-element-button');orderButton.style.textAlign='center';orderButton.style.marginTop='1rem';orderButton.style.borderRadius='.5rem';orderButton.style.padding='.667em 1.33em';const calcSubtotal=document.querySelector('.calc-subtotal');calcSubtotal.appendChild(orderButton);orderButton.addEventListener('click',()=>{createMailtoLinkFor(orderButton);});}const checkCcbLoaded=setInterval(()=>{if(window.ccbLoaded){clearInterval(checkCcbLoaded);convertQuantityFields();createOrderButton();}},200);checkCcbLoaded;});
